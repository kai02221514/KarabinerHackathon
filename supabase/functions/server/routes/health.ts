// Hono をインポート。
// Hono は軽量な Web フレームワークで、ルーティング（GET/POST など）を簡単に書くために使う。
import { Hono } from "npm:hono";

// API 全体で共通して使うプレフィックス（例: "/make-server-f1e05698"）。
// 各ルートはこの prefix の後ろに続く形で URL が決まる。
import { API_PREFIX } from "../constants.ts";

// -------------------------------------------------------------
// ヘルスチェック専用ルーター（Health Check Router）
// -------------------------------------------------------------
//
// このルーターはサーバが「正しく動いているか？」を確認するためだけの用途。
// 監視・テスト・デプロイ確認などで常によく使われるエンドポイント。
// -------------------------------------------------------------

// 新しい Hono インスタンスを作成し、この中に健康診断 API をまとめる。
export const healthRoutes = new Hono();

// -------------------------------------------------------------
// GET /<prefix>/health
//
// サーバが稼働中で、ルーティングも問題なく動いていることを示すためのエンドポイント。
// ブラウザや curl でアクセスすれば JSON を返すだけのシンプルな機能。
// -------------------------------------------------------------

// GET リクエストを受け取ったら、そのまま JSON を返す。
// `${API_PREFIX}/health` のように prefix がついた URL になる。
healthRoutes.get(`${API_PREFIX}/health`, (c) => {
  // c.json() は Content-Type: application/json のレスポンスを返す便利メソッド。
  // { status: "ok" } を返すことで、API サーバの状態が良好であることを示す。
  return c.json({ status: "ok" });
});
